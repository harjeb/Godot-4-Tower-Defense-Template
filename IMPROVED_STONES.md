# 优化后的宝石技能设计

## 🔧 主要修复问题

### 1. **升级逻辑修复**
- 高级宝石应该增强低级宝石的技能，而不是完全替换
- 数值递进更合理，避免跳跃式增长
- 保持技能的核心机制一致性

### 2. **性能优化**
- 移除了一些复杂的实时计算
- 简化了某些范围效果的检测逻辑
- 优化了buff/debuff的处理机制

### 3. **实现可行性**
- 移除了难以实现的特殊机制
- 统一了伤害类型和计算方式
- 简化了状态管理

---

## ❄️ 冰霜宝石系列 (已优化)

| 防御塔 | 宝石 1级 (冰霜宝石) | 宝石 2级 (寒冰之心) | 宝石 3级 (极夜之魂) |
| :--- | :--- | :--- | :--- |
| **箭塔** | **寒冰箭:** 命中单位受到10%减速，持续2秒。 | **彻骨箭:** 减速提升至20%，持续3秒，并附加1层"冰霜"。 | **冰河世纪:** 减速提升至30%，持续4秒，附加2层"冰霜"，15%几率"冻结"1秒。 |
| **捕获塔** | **冰网:** 捕获减速效果提升至100%，持续时间+0.5秒。 | **深度冻结:** 基于1级效果，持续时间再+0.5秒，被捕获目标受到1层"冰霜"。 | **极寒牢笼:** 基于2级效果，捕获结束时"冻结"范围内敌人1.5秒。 |
| **法师塔** | **冰锥术:** 伤害+20%，命中目标受到1层"冰霜"。 | **暴风雪:** 基于1级效果，攻击范围+30%，伤害+40%，命中目标受到2层"冰霜"。 | **冰川尖刺:** 基于2级效果，伤害+60%，命中目标"冻结"2秒，范围内其他敌人受到3层"冰霜"。 |
| **感应塔** | **冰镜:** 范围内隐身单位移动速度额外-20%。 | **寒冰道标:** 基于1级效果，被侦测单位受到1层"冰霜"，被所有塔优先攻击。 | **绝对零度:** 基于2级效果，范围内所有敌人受到2层"冰霜"，隐身单位"冻结"1秒。 |

---

## 🌍 大地宝石系列 (已优化)

| 防御塔 | 宝石 1级 (大地宝石) | 宝石 2级 (山脉之心) | 宝石 3级 (盖亚之魂) |
| :--- | :--- | :--- | :--- |
| **箭塔** | **石肤箭:** 命中目标受到1层"重压"和1层"破甲"。 | **碎岩箭:** 基于1级效果，施加2层"重压"和2层"破甲"。 | **地龙击:** 基于2级效果，变为小范围攻击，主目标20%几率"石化"1.5秒。 |
| **捕获塔** | **地陷网:** 被捕获目标受到2层"破甲"，防御力-15%。 | **石化之网:** 基于1级效果，被捕获目标受到3层"破甲"，30%几率"石化"2秒。 | **地覆天翻:** 基于2级效果，捕获区域变为持续"重压"场地，踏入敌人持续受到"破甲"。 |
| **法师塔** | **陨石术:** 攻击变为范围陨石，伤害+30%，施加2层"重压"。 | **地动山摇:** 基于1级效果，范围+20%，伤害+50%，25%几率"石化"1秒。 | **泰坦之怒:** 基于2级效果，召唤3颗连续陨石，幸存者受到5层"破甲"和"重压"。 |

---

## 💨 疾风宝石系列 (已优化)

| 防御塔 | 宝石 1级 (疾风宝石) | 宝石 2级 (风暴之心) | 宝石 3级 (天穹之魂) |
| :--- | :--- | :--- | :--- |
| **箭塔** | **风之矢:** 攻击速度+15%，命中时"吹飞"目标。 | **裂风矢:** 基于1级效果，攻击速度+25%，命中时施加"失衡"2秒。 | **风神怒:** 基于2级效果，攻击可穿透，对后续2个目标造成50%伤害。 |
| **捕获塔** | **风缚网:** 被捕获目标"沉默"，无法使用技能。 | **真空陷阱:** 基于1级效果，捕获范围+30%，敌人被拉向中心。 | **风暴之眼:** 基于2级效果，捕获变为4秒龙卷风，结束时"吹飞"范围内敌人。 |
| **脉冲塔** | **风压脉冲:** 脉冲将敌人"吹飞"，伤害+20%。 | **紊乱气流:** 基于1级效果，施加"失衡"，15%几率"沉默"2秒。 | **风怒图腾:** 基于2级效果，为范围内友方塔增加30%攻击速度。 |

---

## ☀️ 光明宝石系列 (已优化)

| 防御塔 | 宝石 1级 (光明宝石) | 宝石 2级 (圣光之心) | 宝石 3级 (天堂之魂) |
| :--- | :--- | :--- | :--- |
| **箭塔** | **圣光箭:** 命中目标"致盲"1.5秒，50%几率净化1个增益。 | **驱邪箭:** 基于1级效果，必定净化1个增益，成功净化返还5点能量。 | **审判之箭:** 基于2级效果，施加"审判"5秒，对审判目标必定触发DA。 |
| **法师塔** | **圣光冲击:** 伤害+15%，净化目标1个增益。 | **神圣新星:** 基于1级效果，变为范围攻击，伤害+30%，治疗周围友方塔。 | **天堂之光:** 基于2级效果，从天空召唤圣光，幸存者受到"审判"和"致盲"。 |
| **感应塔** | **真实视域:** 范围内隐身单位"致盲"，治疗效果-50%。 | **圣光信标:** 基于1级效果，隐身单位被净化所有增益。 | **神圣领域:** 基于2级效果，友方塔获得净化攻击，对隐身单位效果翻倍。 |

---

## 🌑 暗影宝石系列 (已优化)

| 防御塔 | 宝石 1级 (暗影宝石) | 宝石 2级 (虚空之心) | 宝石 3级 (深渊之魂) |
| :--- | :--- | :--- | :--- |
| **箭塔** | **暗影箭:** 命中造成1层"腐蚀"，为此塔恢复30%伤害的生命值。 | **吸血箭:** 基于1级效果，造成2层"腐蚀"，恢复50%伤害的生命值。 | **灵魂榨取:** 基于2级效果，造成3层"腐蚀"，恢复100%伤害的生命值，目标死亡时永久+1攻击。 |
| **捕获塔** | **暗影之网:** 被捕获目标受到2层"腐蚀"，治疗效果-50%。 | **恐惧之网:** 基于1级效果，50%几率使范围内敌人"恐惧"2秒。 | **绝望深渊:** 基于2级效果，目标受到"生命虹吸"，此塔吸取范围内所有敌人生命。 |
| **末日塔** | **暗影契约:** 对目标造成的伤害50%转化为此塔生命值。 | **灵魂灼烧:** 基于1级效果，目标受到"腐蚀"和"生命虹吸"，无法被治疗。 | **末日降临:** 基于2级效果，持续时间无限，目标死亡时偷取10%攻击力和防御力。 |

---

## ⚡ 雷电宝石系列 (全新设计)

| 防御塔 | 宝石 1级 (雷电宝石) | 宝石 2级 (风暴之心) | 宝石 3级 (天罚之魂) |
| :--- | :--- | :--- | :--- |
| **箭塔** | **雷鸣箭:** 命中目标受到1层"感电"，有20%几率跳跃到附近敌人。 | **连锁闪电:** 基于1级效果，施加2层"感电"，跳跃几率提升至40%，最多跳跃2次。 | **雷神之怒:** 基于2级效果，施加3层"感电"，跳跃几率60%，最多跳跃3次，每次跳跃"麻痹"0.5秒。 |
| **法师塔** | **雷击术:** 攻击变为瞬发雷击，伤害+25%，施加2层"感电"。 | **雷暴:** 基于1级效果，范围+50%，伤害+40%，命中敌人30%几率"麻痹"1秒。 | **天罚:** 基于2级效果，召唤天雷，施加"破坏"效果2秒，禁用敌人所有技能。 |
| **脉冲塔** | **电磁脉冲:** 脉冲施加1层"感电"，对机械单位伤害翻倍。 | **链式反应:** 基于1级效果，感电敌人受到攻击时会电击周围敌人。 | **雷暴领域:** 基于2级效果，脉冲区域持续3秒，期间敌人持续受到"感电"。 |

---

## 🎯 技能升级逻辑修复总结

### ✅ 修复的问题：

1. **数值递进合理化**
   - 1级：基础效果
   - 2级：强化1级效果 + 小幅新机制
   - 3级：强化2级效果 + 重大新机制

2. **性能优化**
   - 移除了复杂的实时计算
   - 简化了范围检测逻辑
   - 统一了状态效果处理

3. **实现可行性**
   - 所有技能都基于现有框架可实现
   - 避免了过于复杂的特殊机制
   - 保持了游戏平衡性

4. **新增雷电系列**
   - 填补了元素空白
   - 提供了新的玩法机制
   - 专门对付机械单位

这样的设计既保持了宝石升级的逻辑性，又确保了系统的性能和可实现性！