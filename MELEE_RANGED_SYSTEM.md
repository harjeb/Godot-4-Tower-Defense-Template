# 近战/远程塔系统 + 飞行/地面单位系统

## 🎮 系统概述

本系统实现了以下游戏机制：

### 🏗️ 塔类型系统
- **近战塔 (Melee)**: 可以阻挡道路，攻击范围小，拥有生命值
- **远程塔 (Ranged)**: 远距离攻击，无法阻挡道路

### 🦅 敌人移动类型
- **地面单位 (Ground)**: 会被近战塔阻挡，需要绕行或攻击阻挡塔
- **飞行单位 (Flying)**: 无法被任何塔阻挡，直接飞过

### 🎯 目标类型系统
- **地面目标 (Ground Only)**: 只能攻击地面单位
- **空中目标 (Air Only)**: 只能攻击飞行单位
- **全目标 (Both)**: 可以攻击所有单位

## 🔧 实现细节

### 塔配置示例

```gdscript
# 近战阻挡塔
"melee": {
    "combat_type": "melee",          # 近战类型
    "target_type": "ground_only",    # 只攻击地面单位
    "max_health": 150.0,             # 塔的生命值
    "respawn_time": 4.0,             # 被摧毁后复活时间
    "stats": {
        "attack_range": 50.0         # 攻击范围很小
    }
}

# 防空塔
"anti_air": {
    "combat_type": "ranged",         # 远程类型
    "target_type": "air_only",       # 只攻击飞行单位
    "stats": {
        "attack_range": 220.0        # 远程攻击范围
    }
}
```

### 敌人配置示例

```gdscript
# 地面单位
"redDino": {
    "movement_type": "ground"        # 会被近战塔阻挡
}

# 飞行单位
"flyingDragon": {
    "movement_type": "flying",       # 无法被阻挡
    "flying_height": 20.0            # 飞行高度（视觉效果）
}
```

## 🎯 策略玩法

### 近战塔策略
1. **控制流量**: 放置在道路上部分阻挡敌人前进
2. **坦克作用**: 吸收伤害，为远程塔争取时间
3. **复活机制**: 被摧毁后会在设定时间后复活

### 组合策略
1. **地面防御**: 近战塔 + 对地远程塔
2. **空中防御**: 防空塔覆盖飞行路线
3. **混合防御**: 全能塔 + 专门化塔组合

## 🔥 游戏性特色

### 物理阻挡效果
- 近战塔只占道路的1/3，允许小单位通过
- 大量敌人会造成拥挤效果
- 敌人会攻击阻挡塔，增加互动性

### 目标优先级
- 塔会自动过滤可攻击的目标
- 防空塔专门对付飞行单位
- 近战塔专注于地面威胁

### 平衡机制
- 飞行单位通常血量较低，速度较快
- 地面单位更加坚固，但可被阻挡
- 近战塔有生命值限制，防止过度依赖

## 🚀 技术实现亮点

1. **混合移动系统**: PathFollow2D + CharacterBody2D
2. **智能碰撞检测**: 自动切换物理模式
3. **类型安全**: 枚举定义所有类型
4. **数据驱动**: 配置文件控制所有行为

## 📈 扩展可能性

- 添加更多移动类型（水上、地下）
- 实现塔的升级改变类型
- 增加敌人的特殊能力对抗阻挡
- 动态路径重计算系统